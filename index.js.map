{"version":3,"file":"index.js","sources":["../src/js/pets-list-api.js","../src/js/pets-list-render.js","../src/js/pets-list.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery( categoryId, page = 1) {\n    const perPage = window.innerWidth < 1440 ? 8 : 9;\n    const pageNumber = Math.max(1, Number(page) || 1);\n\n    const params = {\n        page: pageNumber,\n        limit: perPage,\n\n    };\n\n    if (categoryId) {\n        params.categoryId = categoryId;\n    }\n\n    const response = await axios.get('https://paw-hut.b.goit.study/api/animals/', { params });\n    return response.data;\n}\n\n/* Категорії */\n\nexport async function getCategoryByQuery() {\n    const response = await axios.get('https://paw-hut.b.goit.study/api/categories/', { });\n    return response.data;\n}","const petsCategoryList = document.querySelector(\".pets-category-list\");\nconst petsList = document.querySelector(\".pets-list\");\nconst loader = document.querySelector(\".loader\");\nexport const morePetsButton = document.querySelector('.more-pets-button');\n\n\nexport function createPetsList(pets) {\n    \n    const petsListContent = pets.map(pet => \n        `<li class=\"pet-list-item\">\n            <div class=\"pet-item-link\">\n                <img class=\"pet-image\" src=\"${pet.image}\" alt=\"${pet.shortDescription}\"/>\n            </div>\n            <div class=\"info-container\">\n                <p class=\"pet-info species\">${pet.species}</p>\n                <p class=\"pet-info name\">${pet.name}</p>\n                <div class=\"pet-info category\">${\n                   pet.categories.map(cat => `<span class=\"category\">${cat.name}</span>`).join(' ')}\n                </div>\n                <p class=\"pet-info age-gender\"><span class=\"age\">${pet.age}</span class=\"gender\"><span>${pet.gender}</span></p>\n                <p class=\"pet-info behavior\">${pet.behavior} ${pet.shortDescription}</p>\n            </div>\n            <div class=\"button-container animated-button ligth\">\n                <a class=\"more-pet-info\" data-id=\"${pet._id}\">Дізнатись більше</a>\n            </div>\n        </li>`\n    ).join('');\n\n    petsList.insertAdjacentHTML(\"beforeend\", petsListContent);\n}\n\nexport function clearPetsList() {\n    petsList.innerHTML = \"\";\n\n}\n\nexport function showLoader() {\n     loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n     loader.style.display = 'none';\n}\n\nexport function hideMorePetsButton() {\n    morePetsButton.style.display = 'none';\n}\n\nexport function showMorePetsButton() {\n    morePetsButton.style.display = 'block';\n}\n\nexport function scrollPetsList() {\n    const firstCard = document.querySelector('.pet-list-item');\n    if (!firstCard) return;\n\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n    });\n}\n\n/* Категорії */\n\nconst desiredOrder = [\n  \"Всі\",\n  \"Собаки\",\n  \"Коти\",\n  \"Кролики\",\n  \"Гризуни\",\n  \"Птахи\",\n  \"Тварини з особливими потребами\",\n  \"Терміново шукають дім\"\n];\n\nexport function createCategoryList(categories) {\n\n    const sortedCategories = categories.slice().sort((a, b) => {\n        return desiredOrder.indexOf(a.name) - desiredOrder.indexOf(b.name);\n    });\n\n\n    const categoriesListContent = sortedCategories\n        .map(cat => `\n            <li class=\"category-list-item\">\n                <button class=\"pet-category-button animated-button dark\"\n                    type=\"button\"\n                    data-category-id=\"${cat._id}\">\n                    ${cat.name}\n                </button>\n            </li>\n        `)\n        .join('');\n\n    petsCategoryList.insertAdjacentHTML(\"beforeend\", categoriesListContent);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery, getCategoryByQuery } from \"./pets-list-api.js\";\nimport {\n  createCategoryList,\n  createPetsList,\n  clearPetsList,\n  showLoader,\n  hideLoader,\n  showMorePetsButton,\n  hideMorePetsButton,\n  scrollPetsList,\n  morePetsButton\n} from \"./pets-list-render.js\";\n\nlet page = 1;\nlet categoryId = '';\nlet petsObjArray = [];\nconst petsList = document.querySelector('.pets-list');\nconst animalDetailsModal = document.querySelector('.animal-details-modal');;\nconst petsCategoryList = document.querySelector('.pets-category-list');\nconst firstCategoryButton = document.querySelector('.pet-category-button.all');\nfirstCategoryButton.classList.add('is-deactive');\n\ngetCategoryByQueryMaker();\ngetImagesByQueryMaker(categoryId, page);\n\npetsCategoryList.addEventListener('click', e => {\n    const button = e.target.closest('.pet-category-button');\n    if (!button) return;\n    const deactiveButton = petsCategoryList.querySelector('.pet-category-button.is-deactive');\n    if (deactiveButton) deactiveButton.classList.remove('is-deactive');\n    button.classList.add('is-deactive');\n    categoryId = button.dataset.categoryId || '';\n    page = 1;\n    hideMorePetsButton();\n    clearPetsList();\n    showLoader();\n    getImagesByQueryMaker(categoryId, page);\n});\n\nif (morePetsButton) {\n  morePetsButton.addEventListener('click', (event) => {\n    event.preventDefault();\n    hideMorePetsButton();\n    showLoader();\n    page++;\n    getImagesByQueryMaker(categoryId, page);\n  });\n}\n\npetsList?.addEventListener('click', (e) => {\n    const btn = e.target.closest('.more-pet-info');\n    if (!btn) return;\n    e.preventDefault();\n\n    const petId = btn.dataset.id;\n\n    window.dispatchEvent(new CustomEvent('open-animal-modal', {\n        detail: { petId }\n    }));\n});\n\n/* Функції */\n\n/* Картки */\nasync function getImagesByQueryMaker(categoryId, page) {\n    try {\n        hideMorePetsButton();\n        const data = await getImagesByQuery(categoryId, page);\n\n        if (data.animals.length === 0) {\n        iziToast.info({\n            message: 'Тварин не знайдено за обраним фільтром.',\n            position: 'topRight',\n        });\n        clearPetsList();\n        hideMorePetsButton();\n        return;\n        }\n\n        petsObjArray = data.animals;\n        setPets(petsObjArray); \n        createPetsList(petsObjArray);\n\n        if (page > 1) scrollPetsList();\n\n        const totalPages = Math.ceil(data.totalItems / data.limit);\n\n        if (page >= totalPages) {\n        hideMorePetsButton();\n        iziToast.info({\n            message: 'Ви переглянули всі доступні результати.'\n        });\n        } else {\n        showMorePetsButton();\n        }\n\n    } catch (error) {\n        iziToast.error({\n        message: error?.message || 'Сталася помилка під час завантаження тварин.',\n        position: \"topRight\", });\n    } finally {hideLoader();}\n}\n\n/* Категорії */\n\nasync function getCategoryByQueryMaker() {\n  try {\n    const data = await getCategoryByQuery();\n\n    if (!Array.isArray(data) || data.length === 0) {\n      iziToast.info({\n        message: 'Категорії не знайдено.',\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    petsObjArray = data; \n    createCategoryList(petsObjArray);\n\n  } catch (error) {\n    iziToast.error({\n      message: error?.message || 'Сталася помилка під час завантаження категорій.',\n      position: \"topRight\",\n    });\n  } finally {\n  }\n}\n\n/* функції для передачі данних для модалки*/\n\nfunction setPets(data) {\n  petsObjArray = Array.isArray(data) ? data : [];\n}\n\nexport function getPets() {\n  return petsObjArray;\n}\n\nexport function getPetById(id) {\n  return petsObjArray.find(p => p._id === id);\n}"],"names":["getImagesByQuery","categoryId","page","perPage","params","axios","getCategoryByQuery","petsCategoryList","petsList","loader","morePetsButton","createPetsList","pets","petsListContent","pet","cat","clearPetsList","showLoader","hideLoader","hideMorePetsButton","showMorePetsButton","scrollPetsList","firstCard","cardHeight","desiredOrder","createCategoryList","categories","categoriesListContent","a","b","petsObjArray","firstCategoryButton","getCategoryByQueryMaker","getImagesByQueryMaker","button","deactiveButton","event","btn","petId","data","iziToast","setPets","totalPages","error"],"mappings":"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"}