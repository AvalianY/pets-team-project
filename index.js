import{a as y,i,A as $,R as C,S as E}from"./assets/vendor-c3DGDjBf.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();async function M(e,s=1){const t=window.innerWidth<1440?8:9,o={page:Math.max(1,Number(s)||1),limit:t};return e&&(o.categoryId=e),(await y.get("https://paw-hut.b.goit.study/api/animals/",{params:o})).data}async function A(){return(await y.get("https://paw-hut.b.goit.study/api/categories/",{})).data}const k=document.querySelector(".pets-category-list"),L=document.querySelector(".pets-list"),b=document.querySelector(".loader"),u=document.querySelector(".more-pets-button");function O(e){const s=e.map(t=>`<li class="pet-list-item">
            <div class="pet-item-link">
                <img class="pet-image" src="${t.image}" alt="${t.shortDescription}"/>
            </div>
            <div class="info-container">
                <p class="pet-info species">${t.species}</p>
                <p class="pet-info name">${t.name}</p>
                <div class="pet-info category">${t.categories.map(r=>`<span class="category">${r.name}</span>`).join(" ")}
                </div>
                <p class="pet-info age-gender"><span class="age">${t.age}</span class="gender"><span>${t.gender}</span></p>
                <p class="pet-info behavior">${t.behavior} ${t.shortDescription}</p>
            </div>
            <div class="button-container animated-button ligth">
                <a class="more-pet-info" data-id="${t._id}">Дізнатись більше</a>
            </div>
        </li>`).join("");L.insertAdjacentHTML("beforeend",s)}function S(){L.innerHTML=""}function q(){b.style.display="block"}function B(){b.style.display="none"}function c(){u.style.display="none"}function P(){u.style.display="block"}function I(){const e=document.querySelector(".pet-list-item");if(!e)return;const s=e.getBoundingClientRect().height;window.scrollBy({top:s*2,behavior:"smooth"})}const w=["Всі","Собаки","Коти","Кролики","Гризуни","Птахи","Тварини з особливими потребами","Терміново шукають дім"];function R(e){const t=e.slice().sort((r,o)=>w.indexOf(r.name)-w.indexOf(o.name)).map(r=>`
            <li class="category-list-item">
                <button class="pet-category-button animated-button dark"
                    type="button"
                    data-category-id="${r._id}">
                    ${r.name}
                </button>
            </li>
        `).join("");k.insertAdjacentHTML("beforeend",t)}let l=1,p="",a=[];const m=document.querySelector(".pets-list");document.querySelector(".animal-details-modal");const v=document.querySelector(".pets-category-list"),T=document.querySelector(".pet-category-button.all");T.classList.add("is-deactive");j();h(p,l);v.addEventListener("click",e=>{const s=e.target.closest(".pet-category-button");if(!s)return;const t=v.querySelector(".pet-category-button.is-deactive");t&&t.classList.remove("is-deactive"),s.classList.add("is-deactive"),p=s.dataset.categoryId||"",l=1,c(),S(),q(),h(p,l)});u&&u.addEventListener("click",e=>{e.preventDefault(),c(),q(),l++,h(p,l)});m==null||m.addEventListener("click",e=>{const s=e.target.closest(".more-pet-info");if(!s)return;e.preventDefault();const t=s.dataset.id;window.dispatchEvent(new CustomEvent("open-animal-modal",{detail:{petId:t}}))});async function h(e,s){try{c();const t=await M(e,s);if(t.animals.length===0){i.info({message:"Тварин не знайдено за обраним фільтром.",position:"topRight"}),S(),c();return}a=t.animals,D(a),O(a),s>1&&I();const r=Math.ceil(t.totalItems/t.limit);s>=r?(c(),i.info({message:"Ви переглянули всі доступні результати."})):P()}catch(t){i.error({message:(t==null?void 0:t.message)||"Сталася помилка під час завантаження тварин.",position:"topRight"})}finally{B()}}async function j(){try{const e=await A();if(!Array.isArray(e)||e.length===0){i.info({message:"Категорії не знайдено.",position:"topRight"});return}a=e,R(a)}catch(e){i.error({message:(e==null?void 0:e.message)||"Сталася помилка під час завантаження категорій.",position:"topRight"})}finally{}}function D(e){a=Array.isArray(e)?e:[]}new $("#faq-accordion",{duration:300,showMultiple:!1,openOnInit:[]});const H=y.create({baseURL:"https://paw-hut.b.goit.study/api/",params:{page:1,limit:6}});async function x(){try{const{data:e}=await H.get("/feedbacks");return e.feedbacks}catch{return null}}function N(e){const s=document.querySelector(".swiper-wrapper"),t=e.map(({description:r,rate:o,author:n})=>`
        <div class="swiper-slide">
          <div class="star-rating" data-score="${o}"></div>     
            <p class="storie-text">${r}</p>
            <p class="storie-names">${n}</p>  
        </div>`).join("");s.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".star-rating").forEach(r=>{new C(r,{starType:"svg",readOnly:!0}).init()})}const Q=document.querySelector(".stories-loader"),V=document.querySelector(".swiper-controls");function g(e){i.info({message:e,position:"topRight",color:"#f2aaaaff",icon:!1,progressBar:!1,messageColor:"black"})}function d(){Q.classList.remove("loader")}function W(){V.classList.remove("visually-hidden")}window.addEventListener("DOMContentLoaded",async()=>{try{let e=await x();if(e===null){g("Не вдалося завантажити історії. Спробуйте пізніше"),d();const t=document.querySelector(".swiper-wrapper");t&&(t.innerHTML='<p class="error-swiper">Не вдалося завантажити історії</p>');return}if(e.length===0){g("Нажаль, історії зараз недоступні"),d();const t=document.querySelector(".swiper-wrapper");t&&(t.innerHTML='<p class="error-swiper">Нажаль, історії зараз недоступні</p>');return}N(e);const s=new E(".swiper",{direction:"horizontal",loop:!1,speed:400,spaceBetween:32,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{768:{slidesPerView:2}}});W(),d()}catch{g("Cталась помилка. Спробуйте пізніше");const s=document.querySelector(".swiper-wrapper");s&&(s.innerHTML='<p class="error-swiper">Нажаль, історії зараз недоступні</p>'),d()}});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".footer-nav-link").forEach(s=>{s.addEventListener("click",function(t){t.preventDefault();const r=this.getAttribute("href");if(r&&r.startsWith("#")){const o=document.querySelector(r);o&&o.scrollIntoView({behavior:"smooth",block:"start"})}})})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".footer-nav-link");e.length&&e.forEach(s=>{s.addEventListener("click",t=>{if(s.classList.contains("is-disabled"))return;e.forEach(n=>n.classList.remove("is-active")),s.classList.add("is-active");const r=s.getAttribute("href"),o=document.querySelector(r);o&&o.scrollIntoView({behavior:"smooth"}),history.pushState(null,"",r)})})});
//# sourceMappingURL=index.js.map
